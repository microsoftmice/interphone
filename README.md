@font-face{ font-family:"Times New Roman"; } @font-face{ font-family:"宋体"; } @font-face{ font-family:"Wingdings"; } @font-face{ font-family:"Calibri"; } @list l0:level1{ mso-level-number-format:bullet; mso-level-suffix:tab; mso-level-text:\\\F06C; mso-level-tab-stop:none; mso-level-number-position:left; margin-left:21.0000pt;text-indent:-21.0000pt;font-family:Wingdings;} @list l1:level1{ mso-level-number-format:decimal-enclosed-circle-chinese; mso-level-suffix:none; mso-level-text:"%1　"; mso-level-tab-stop:none; mso-level-number-position:left; margin-left:0.0000pt;text-indent:20.0000pt;margin-left:0.0000pt; font-family:宋体;} @list l2:level1{ mso-level-number-format:decimal; mso-level-suffix:tab; mso-level-text:"%1."; mso-level-tab-stop:none; mso-level-number-position:left; margin-left:21.2500pt;text-indent:-21.2500pt;font-family:'Times New Roman';} @list l3:level1{ mso-level-number-format:decimal-enclosed-circle-chinese; mso-level-suffix:none; mso-level-text:"%1　"; mso-level-tab-stop:none; mso-level-number-position:left; margin-left:0.0000pt;text-indent:20.0000pt;margin-left:0.0000pt; font-family:宋体;} @list l4:level1{ mso-level-number-format:bullet; mso-level-suffix:tab; mso-level-text:\\\F06C; mso-level-tab-stop:none; mso-level-number-position:left; margin-left:21.0000pt;text-indent:-21.0000pt;font-family:Wingdings;} @list l5:level1{ mso-level-number-format:decimal; mso-level-suffix:tab; mso-level-text:"%1."; mso-level-tab-stop:none; mso-level-number-position:left; margin-left:21.2500pt;text-indent:-21.2500pt;font-family:'Times New Roman';} @list l6:level1{ mso-level-number-format:chinese-counting; mso-level-suffix:none; mso-level-text:"%1、"; mso-level-tab-stop:none; mso-level-number-position:left; margin-left:0.0000pt;text-indent:21.0000pt;margin-left:0.0000pt; font-family:宋体;} p.MsoNormal{ mso-style-name:正文; mso-style-parent:""; margin:0pt; margin-bottom:.0001pt; mso-pagination:none; text-align:justify; text-justify:inter-ideograph; font-family:Calibri; mso-fareast-font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:10.5000pt; mso-font-kerning:1.0000pt; } h1{ mso-style-name:"标题 1"; mso-style-next:正文; margin-top:17.0000pt; margin-bottom:16.5000pt; mso-para-margin-top:0.0000gd; mso-para-margin-bottom:0.0000gd; page-break-after:avoid; mso-pagination:lines-together; text-align:justify; text-justify:inter-ideograph; mso-outline-level:1; line-height:240%; font-family:Calibri; mso-fareast-font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; } h3{ mso-style-name:"标题 3"; mso-style-noshow:yes; mso-style-next:正文; margin-top:13.0000pt; margin-bottom:13.0000pt; mso-para-margin-top:0.0000gd; mso-para-margin-bottom:0.0000gd; page-break-after:avoid; mso-pagination:lines-together; text-align:justify; text-justify:inter-ideograph; mso-outline-level:3; line-height:172%; font-family:Calibri; mso-fareast-font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-weight:bold; font-size:16.0000pt; mso-font-kerning:1.0000pt; } span.10{ font-family:'Times New Roman'; } span.15{ font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; } span.16{ font-family:'Times New Roman'; font-style:italic; } p.p{ mso-style-name:"普通\\\(网站\\\)"; margin-top:5.0000pt; margin-right:0.0000pt; margin-bottom:5.0000pt; margin-left:0.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; mso-pagination:none; text-align:left; font-family:Calibri; mso-fareast-font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:12.0000pt; } span.msoIns{ mso-style-type:export-only; mso-style-name:""; text-decoration:underline; text-underline:single; color:blue; } span.msoDel{ mso-style-type:export-only; mso-style-name:""; text-decoration:line-through; color:red; } table.MsoNormalTable{ mso-style-name:普通表格; mso-style-parent:""; mso-style-noshow:yes; mso-tstyle-rowband-size:0; mso-tstyle-colband-size:0; mso-padding-alt:0.0000pt 5.4000pt 0.0000pt 5.4000pt; mso-para-margin:0pt; mso-para-margin-bottom:.0001pt; mso-pagination:widow-orphan; font-family:'Times New Roman'; font-size:10.0000pt; mso-ansi-language:#0400; mso-fareast-language:#0400; mso-bidi-language:#0400; } @page{mso-page-border-surround-header:no; mso-page-border-surround-footer:no;}@page Section0{ margin-top:72.0000pt; margin-bottom:72.0000pt; margin-left:90.0000pt; margin-right:90.0000pt; size:595.3000pt 841.9000pt; layout-grid:15.6000pt; } div.Section0{page:Section0;} **《人工智能+无线电应答平台》** ================== ### 作者：BG7EJL 一、**项目背景** 目前市面上基于U/V频段的无线电应答应用，大多数将对讲机终端与APP或PC相结合，实现无线电网络与互联网的互联互通，如常见的“微喇”或其他PC端软件，其本质上解决了无线电网络的延伸问题。 那么，如何在此基础上更进一步发展，实现无线电网络在互联网的支撑下，借助人工智能语音识别功能与各行各业进行业务融合，是这个平台解决的主要问题。 下面我以U/V段对讲机进行实时天气、路况查询为应用，介绍这个平台的制作过程，并将最终作品的代码与原理图开源给所有爱好者。 二、**系统功能框图** !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台264.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台265.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台266.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台267.png) !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台269.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台270.png) !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台272.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台273.png) !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台276.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台277.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台278.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台279.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台280.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台281.png) !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台284.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台285.png) !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台287.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台288.png) !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台290.png) !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台292.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台293.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台294.png) !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台296.png)!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台297.png) !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台299.png) 三、**平台处理流程** 1.用户通过普通对讲机进行道路态势请求呼叫。 2.平台客户端接受呼叫请求，并将音频数据发送至服务端。 3.服务端通过语音识别ASR功能将语音转换成文字，同时发送至高德路况查询服务器。 4.高德路况查询服务器根据请求内容返回实时路况信息给平台服务端。 5.平台服务端将路况信息通过TTS功能转换成语音数据，通过互联网发送至平台客户端。 6.平台客户端接受实时路况语音数据，通过U/V段无线电广播至用户对讲机。 四、**制作细节（硬件部分）** 1.主要硬件材料准备 1个SR-FRS-2WU模块；它基于数字信号处理技术的调频解调技术；频率范围：400M～480MHZ；频率步进可选择：5K/6.25K/12.5K/25K；RF 输出功率： 高功率1W,低功率0.5W；语音加密（扰频）功能；短信息 SMS 收发功能。 1个ESP32-A1S 模组；它是一款超小体积，功能强大的模组，主芯片采用低功耗双核 32 位 CPU，主频高达240MHz，运算能力高达 600 DMIPS，内置 AC101 Codec音频解码芯片,可以支持播放音乐和录音，内置 520 KB SRAM，外置 4MPSRAM，支持 UART/SPI/I2C/I2S/PWM/ADC/DAC 等。 1个ams1117-3.3模块；AMS1117-3.3是一种输出电压为3.3V的正向低压降稳压器。 3个轻触开关，6\\\*6\\\*8侧按开关； 1个拨动开关； 电容电阻二极管若干。 2.电路制作步骤： l将射频收发模块与微处理器连接。如图： !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台941.png) 将PPT脚与IO12脚连接，实现射频发射可控；将SQ脚与IO5脚连接，实现射频接受可控；将AF-OUT脚与LINEIN脚连接，用于接受语音数据；将MIC-IN脚与HPOUT脚连接，用于发射语音数据；RXD\\\TXD分别连接IO4,IO5，实现处理器通过串口协议进行前期射频参数设置，如收发频率、发射功率、哑音、休眠模式等。 在这里我们设置射频收发频率为：450.0500，通过查询射频收发模块的操作手册，控制命令如下：AT+DMOSETGROUP=0，450.0500，450.2500，1，2，1，0(回车) 参数依次为：  0：窄带  450.0500：发射频率（ MHZ）  450.2500：接收频率 （ MHZ）  1：接收亚音频:  2：SQ 静噪  1：发射亚音频  0：发射功率 1W, 压扩 OFF,繁忙禁发 OFF l通过AMS1117稳压电路，对整个平台提供稳压电源。如图： !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台1342.png) l在微控制器拉出2个引脚，分别实现对ESP32模块的复位和网络设置功能。如图： !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台1383.png) 其中，网络设置通过终端管理APP来实现，步骤如下： ①　下载并安装终端管理APP版，地址如下： \[https://www.espressif.com/zh-hans/support/download/apps\](https://www.espressif.com/zh-hans/support/download/apps) ②　设置当前WIFI网络的SSID，以及PASSWORD，点击CONFIRM。如图： !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台1600.png) ③　按下平台客户端的网络设置按键（长按3秒） ④　平台客户端将通过UDP协议自动获取APP设置的WIFI信息进行联网。 lRXD、TXD程序烧录接口。如图： !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台1676.png) 其中，烧录功能通过FLASH\\\_DOWNLOAD\\\_TOOLS_V3.6.2.2工具进行。下载地址如下： \[https://www.espressif.com/zh-hans/support/download/other-tools\](https://www.espressif.com/zh-hans/support/download/other-tools) 配置方式如图： !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台1879.png) l制作完成后的PCB图如下： !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台1895.png) 五、**制作细节（软件部分）** l平台服务端采用WEB架构，JAVA语言开发。功能框图如下： !\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台1938.png) l软件处理流程如下： ①　平台客户端将接收到的语音数据封装成HTTP流格式，实时上送到平台服务端； ②　服务端监听模块将HTTP包解封后，将语音数据传送至语音ASR识别服务模块。 ③　ASR服务奖语音识别成文字后，开始调用业务处理模块。 ④　业务处理模块将用户请求内容通过高德路况服务API接口，传送至高德服务器；并获取服务器返回的路况信息。 ⑤　将路况信息结果进行语音TTS转换。 ⑥　最后通过发送模块将语音封装成HTTP流格式，实时下发给平台客户端。 六、**实时路况查询** 通过以上步骤，将平台客户端WIFI网络、IP地址以及平台服务端配置好后，打开对讲机，将频率调至450.0500，开始与平台进行交互。 l用户呼叫：北二环交通情况怎么样？ l平台客户端应答：北二环目前道路畅通。 l用户呼叫：芙蓉北路现在是否堵车？ l平台客户端应答：芙蓉北路由南往北行驶缓慢。 l用户呼叫：今天长沙天气如何？ l平台客户端应答：今天长沙天气晴朗，气温25度，南风，适合出行。 l。。。。。。。 视频地址:!\[\](人工智能+无线电应答平台.files/人工智能+无线电应答平台2364.png) 七、**各种业务场景应用** 平台可通过提供的第3方二次开发接口，实现各种业务功能融合，如：自动定时语音播报，定时播放MP3,WAV文件；对U/V段通信的语音通话监控、过滤、记录、查询等；天气播报；路况查询、快递查询等。利用平台智能对答场景，实现用户各种业务处理，搭建安全、高效、易于管理的单位内部语音通信系统，适用于执勤、消防、物流、港口、医院等所有需要统一管理调度的场景。 最后感谢BG7XP许群主对项目的支持和帮助。 HAVE FUN！ **附：** 代码、原理图、PCB电路图下载地址：\[https://github.com/dodouegg\](https://github.com/dodouegg) 邮箱：dodouegg@qq.com